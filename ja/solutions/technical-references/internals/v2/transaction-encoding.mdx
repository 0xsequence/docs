---
title: トランザクションエンコーディング
description: Sequenceウォレットが複数のトランザクションを1つのトランザクションにバンドルするために使用するカスタムトランザクションエンコーディング形式について説明します。
---

Sequenceウォレットは、複数のトランザクションを1つのトランザクションにバンドルするためのカスタムトランザクションエンコーディング形式を使用します。これにより、ウォレットとのやり取りに必要なトランザクション数を削減できます。
この形式は、トランザクションのいずれかが失敗した場合にトランザクションバンドル全体を元に戻すなどの機能もサポートしています。

```solidity
  struct Transaction {
    bool delegateCall;   // Performs delegatecall
    bool revertOnError;  // Reverts transaction bundle if tx fails
    uint256 gasLimit;    // Maximum gas to be forwarded
    address target;      // Address of the contract to call
    uint256 value;       // Amount of ETH to pass with the call
    bytes data;          // calldata to pass
  }
```

この`Transaction`構造体は、ウォレットのトランザクションデータをエンコードするために使用されます。これはウォレットコントラクトの`execute`関数で使用されます。

この`delegateCall`フィールドは、トランザクションを通常の`delegatecall`の代わりに`call`を使用して実行するかどうかを決定します。
これは、ターゲットコントラクトがウォレットのコンテキストで実行される必要がある機能を提供している場合に便利です。

<Warning>
  デリゲートコールはターゲットコントラクトをウォレットのコンテキストで実行するため、ターゲットコントラクトが信頼できるものであり、悪意のあるコードが含まれていないことを確認することが重要です。
</Warning>

この`revertOnError`フィールドは、トランザクションのいずれかが失敗した場合にトランザクションバンドル全体を元に戻すかどうかを決定するために使用されます。
複数の独立したトランザクションをバンドルする場合、特定のトランザクションが失敗した場合にバンドル全体を元に戻すことが有利な場合があります。

この`gasLimit`フィールドは、ターゲットコントラクトに転送されるべきガスの最大量を指定するために使用されます。

この`target`フィールドは、呼び出すコントラクトのアドレスです。

この`value`フィールドは、呼び出しと共に渡すETHの量です。このETHはウォレットコントラクトからターゲットコントラクトに送信されます。

この`data`フィールドは、ターゲットコントラクトに渡すコールデータです。
