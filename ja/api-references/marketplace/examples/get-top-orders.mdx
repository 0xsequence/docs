---
title: GetTopOrders
sidebarTitle: トップオーダーを取得
---

APIを使用することで`GetTopOrders`開発者は実行すべき最適なオーダーを取得するボットを構築したり、アクションを起こすべき最適なオーダーを追跡する単純な通知システムを作成したりすることができます。

<CodeGroup>
  ```shell cURL
  curl --request POST \
      --url https://marketplace-api.sequence.app/arbitrum-sepolia/rpc/Marketplace/GetTopOrders \
      --header 'Content-Type: application/json' \
      --data '{
          "collectionAddress": "0x1693ffc74edbb50d6138517fe5cd64fd1c917709",
          "currencyAddresses": [
              "0xa9c88358862211870db6f18bc9b3f6e4f8b3eae7"
          ],
          "orderbookContractAddress": "0xfdb42A198a932C8D3B506Ffa5e855bC4b348a712",
          "tokenIDs": ["0","1", "2", "3", "4", "5"],
          "isListing": true,
          "priceSort": "DESC"
      }'
  ```

  ```ts TypeScript
  // Works in both a Webapp (browser) or Node.js by importing cross-fetch:
  // import fetch from "cross-fetch";

  (async () => {
    const res = await fetch(
      "https://marketplace-api.sequence.app/arbitrum-sepolia/rpc/Marketplace/GetTopOrders",
      {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          collectionAddress: "0x1693ffc74edbb50d6138517fe5cd64fd1c917709",
          currencyAddresses: ["0xa9c88358862211870db6f18bc9b3f6e4f8b3eae7"],
          orderbookContractAddress: "0xfdb42A198a932C8D3B506Ffa5e855bC4b348a712",
          tokenIDs: ["0", "1", "2", "3", "4", "5"],
          isListing: true,
          priceSort: "DESC",
        }),
      }
    );
    console.log("res", await res.json());
  })();
  ```
</CodeGroup>

### スキーマ

様々なフィルターに基づいてプロトコルから最適なオーダーを照会します。

プロトコルから最適なオーダーを取得します。オプションで特定のユーザーが作成したオーダーを除外することができます。

* リクエスト: POST /rpc/Marketplace/GetTopOrders
* Content-Type: application/json
* ボディ (JSON形式):
  * `orderbookContractAddress` (string) -- プロトコルコントラクトのアドレス
  * `collectionAddress` (string) -- NFTコレクションのアドレス
  * `currencyAddresses` (string\[]) -- 通貨コントラクトアドレスの配列
  * `tokenIDs` (string\[]) -- オーダーをフィルタリングするトークンIDの配列
  * `isListing` (bool) -- 出品オーダー（true）またはオファーオーダー（false）を取得するかどうか
  * `priceSort` (SortOrder) -- 価格でオーダーをソートする方向を示すenum：`"DESC"`または`"ASC"`
  * `excludeUser?` (string) -- 除外するユーザーのアドレス
* レスポンス (JSON形式):
  * `page`
    * `page` (i32) -- ページ番号
    * `pageSize` (i32) -- ページ内のオーダー数
    * `more` (bool) -- さらにオーダーがあるかどうか
  * `orders` (OrderbookOrder\[])
    \[
    * `orderId` (string) -- オーダーID
    * `tokenContract` (string) -- コレクションコントラクト
    * `tokenId` (string) -- オーダー内のコレクションのトークンID
    * `isListing` (bool) -- 販売出品の場合はtrue、オファーの場合はfalse
    * `quantity` (string) -- オーダーのトークン数
    * `quantityRemaining` (string) -- オーダー後のトークン数
    * `currencyAddress` (string) -- トークンが取引される通貨
    * `pricePerToken` (string) -- トークンあたりの価格
    * `expiry` (string) -- オーダーが無効になる有効期限
    * `orderStatus` (OrderStatus) -- オーダーのステータスを示すenum：`"OPEN"`、`"CLOSED"`、`"CANCELLED"`
    * `createdBy` (string) -- オーダーを作成したアドレス
    * `createdAt` (uint64) -- オーダーが作成された時間
    * `orderbookContractAddress` (string) -- オーダーブックコントラクトアドレス
      ]
