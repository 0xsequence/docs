---
title: useMetadataClient
description: トークンとコントラクトメタデータのためのSequence Metadataクライアントにアクセスするためのフック
sidebarTitle: useMetadataClient
---

## インポート

```tsx
import { useMetadataClient } from '@0xsequence/hooks'
```

## 使用方法

```tsx
import { useMetadataClient } from '@0xsequence/hooks'

function CustomMetadataFetcher() {
  const metadataClient = useMetadataClient()
  const [metadata, setMetadata] = useState(null)
  const [isLoading, setIsLoading] = useState(false)
  
  const fetchContractMetadata = async () => {
    setIsLoading(true)
    try {
      // Fetch metadata for a specific contract
      const response = await metadataClient.getContractInfo({
        chainID: "1",
        contractAddress: "0x..." 
      })
      
      setMetadata(response.contractInfo)
    } catch (error) {
      console.error('Failed to fetch metadata:', error)
    } finally {
      setIsLoading(false)
    }
  }

  // Example of batch token metadata fetch
  const fetchBatchTokenMetadata = async () => {
    setIsLoading(true)
    try {
      const response = await metadataClient.getTokenMetadata({
        chainID: "1",
        contractAddress: "0x...",
        tokenIDs: ["1", "2", "3"]
      })
      
      setMetadata(response.tokenMetadata)
    } catch (error) {
      console.error('Failed to fetch token metadata:', error)
    } finally {
      setIsLoading(false)
    }
  }

  return (
    <div>
      <button 
        onClick={fetchContractMetadata}
        disabled={isLoading}
      >
        Fetch Contract Info
      </button>
      
      <button 
        onClick={fetchBatchTokenMetadata}
        disabled={isLoading}
      >
        Fetch Token Metadata
      </button>

      {isLoading && <div>Loading...</div>}
      
      {metadata && (
        <pre>
          {JSON.stringify(metadata, null, 2)}
        </pre>
      )}
    </div>
  )
}
```

## 戻り値の型：`SequenceMetadata`

このフックは設定済みの`SequenceMetadata`クライアントのインスタンスを返します。以下が詳細な構造です：

```tsx
interface SequenceMetadata {
  // Service Methods
  ping(headers?: object, signal?: AbortSignal): Promise<PingResponse>
  version(headers?: object, signal?: AbortSignal): Promise<VersionResponse>
  runtimeStatus(headers?: object, signal?: AbortSignal): Promise<RuntimeStatusReturn>
  
  // Task Management Methods
  getTask(args: GetTaskArgs, headers?: object, signal?: AbortSignal): Promise<GetTaskReturn>
  getTaskStatus(args: GetTaskStatusArgs, headers?: object, signal?: AbortSignal): Promise<GetTaskStatusReturn>
  
  // Token Metadata Methods
  getTokenMetadata(args: GetTokenMetadataArgs, headers?: object, signal?: AbortSignal): Promise<GetTokenMetadataReturn>
  getTokenMetadataBatch(args: GetTokenMetadataBatchArgs, headers?: object, signal?: AbortSignal): Promise<GetTokenMetadataBatchReturn>
  searchTokenMetadata(args: SearchTokenMetadataArgs, headers?: object, signal?: AbortSignal): Promise<SearchTokenMetadataReturn>
  searchTokenIDs(args: SearchTokenIDsArgs, headers?: object, signal?: AbortSignal): Promise<SearchTokenIDsReturn>
  tokenCollectionFilters(args: TokenCollectionFiltersArgs, headers?: object, signal?: AbortSignal): Promise<TokenCollectionFiltersReturn>
  
  // Token Refresh Methods
  refreshTokenMetadata(args: RefreshTokenMetadataArgs, headers?: object, signal?: AbortSignal): Promise<RefreshTokenMetadataReturn>
  enqueueTokensForRefresh(args: EnqueueTokensForRefreshArgs, headers?: object, signal?: AbortSignal): Promise<EnqueueTokensForRefreshReturn>
  getTokenRefreshStatus(args: GetTokenRefreshStatusArgs, headers?: object, signal?: AbortSignal): Promise<GetTokenRefreshStatusReturn>
  getTokenRefreshResult(args: GetTokenRefreshResultArgs, headers?: object, signal?: AbortSignal): Promise<GetTokenRefreshResultReturn>
  cancelRefreshJob(args: CancelRefreshJobArgs, headers?: object, signal?: AbortSignal): Promise<CancelRefreshJobReturn>
  
  // Contract Methods
  getContractInfo(args: GetContractInfoArgs, headers?: object, signal?: AbortSignal): Promise<GetContractInfoReturn>
  getContractInfoBatch(args: GetContractInfoBatchArgs, headers?: object, signal?: AbortSignal): Promise<GetContractInfoBatchReturn>
  searchContractInfo(args: SearchContractInfoArgs, headers?: object, signal?: AbortSignal): Promise<SearchContractInfoReturn>
  searchContractInfoBatch(args: SearchContractInfoBatchArgs, headers?: object, signal?: AbortSignal): Promise<SearchContractInfoBatchReturn>
  refreshContractInfo(args: RefreshContractInfoArgs, headers?: object, signal?: AbortSignal): Promise<RefreshContractInfoReturn>
  refreshContractTokens(args: RefreshContractTokensArgs, headers?: object, signal?: AbortSignal): Promise<RefreshContractTokensReturn>
  refreshAllContractTokens(args: RefreshAllContractTokensArgs, headers?: object, signal?: AbortSignal): Promise<RefreshAllContractTokensReturn>
  
  // Search Methods
  searchMetadata(args: SearchMetadataArgs, headers?: object, signal?: AbortSignal): Promise<SearchMetadataReturn>
  searchTokens(args: SearchTokensArgs, headers?: object, signal?: AbortSignal): Promise<SearchTokensReturn>
  searchContracts(args: SearchContractsArgs, headers?: object, signal?: AbortSignal): Promise<SearchContractsReturn>
  
  // Niftyswap Methods
  getNiftyswapTokenQuantity(args: GetNiftyswapTokenQuantityArgs, headers?: object, signal?: AbortSignal): Promise<GetNiftyswapTokenQuantityReturn>
  getNiftyswapUnitPrices(args: GetNiftyswapUnitPricesArgs, headers?: object, signal?: AbortSignal): Promise<GetNiftyswapUnitPricesReturn>
  getNiftyswapUnitPricesWithQuantities(args: GetNiftyswapUnitPricesWithQuantitiesArgs, headers?: object, signal?: AbortSignal): Promise<GetNiftyswapUnitPricesWithQuantitiesReturn>
  
  // Mint Monitor Methods
  addContractToMintMonitor(args: AddContractToMintMonitorArgs, headers?: object, signal?: AbortSignal): Promise<AddContractToMintMonitorReturn>
  removeContractFromMintMonitor(args: RemoveContractFromMintMonitorArgs, headers?: object, signal?: AbortSignal): Promise<RemoveContractFromMintMonitorReturn>
  mintMonitorJobStatus(args: MintMonitorJobStatusArgs, headers?: object, signal?: AbortSignal): Promise<MintMonitorJobStatusReturn>
  mintMonitorTriggerJob(args: MintMonitorTriggerJobArgs, headers?: object, signal?: AbortSignal): Promise<MintMonitorTriggerJobReturn>
  
  // Contract Sync Methods
  syncContractTokens(args: SyncContractTokensArgs, headers?: object, signal?: AbortSignal): Promise<SyncContractTokensReturn>
  abortContractSync(args: AbortContractSyncArgs, headers?: object, signal?: AbortSignal): Promise<AbortContractSyncReturn>
  contractSyncJobStatus(args: ContractSyncJobStatusArgs, headers?: object, signal?: AbortSignal): Promise<ContractSyncJobStatusReturn>
  
  // Directory Methods
  directoryGetNetworks(args: DirectoryGetNetworksArgs, headers?: object, signal?: AbortSignal): Promise<DirectoryGetNetworksReturn>
  directoryGetCollections(args: DirectoryGetCollectionsArgs, headers?: object, signal?: AbortSignal): Promise<DirectoryGetCollectionsReturn>
  directorySearchCollections(args: DirectorySearchCollectionsArgs, headers?: object, signal?: AbortSignal): Promise<DirectorySearchCollectionsReturn>
}
```

### 利用可能なメソッド

#### サービスメソッド

* `ping`：サービスの可用性を確認
* `version`：メタデータサービスのバージョン情報を取得
* `runtimeStatus`：サービスの現在のランタイムステータスを取得

#### タスク管理メソッド

* `getTask`：特定のタスクの詳細を取得
* `getTaskStatus`：タスクのステータスを取得

#### トークンメタデータメソッド

* `getTokenMetadata`: 特定のトークンのメタデータを取得
* `getTokenMetadataBatch`: トークンメタデータの一括取得
* `searchTokenMetadata`: トークンメタデータの検索
* `searchTokenIDs`: 特定のトークンIDの検索
* `tokenCollectionFilters`: トークンコレクションの利用可能なフィルターを取得

#### トークン更新メソッド

* `refreshTokenMetadata`: 特定のトークンのメタデータを更新
* `enqueueTokensForRefresh`: メタデータ更新のためのトークンをキューに追加
* `getTokenRefreshStatus`: トークン更新のステータスを確認
* `getTokenRefreshResult`: トークン更新の結果を取得
* `cancelRefreshJob`: 進行中の更新ジョブをキャンセル

#### コントラクトメソッド

* `getContractInfo`: 単一のコントラクトのメタデータを取得
* `getContractInfoBatch`: コントラクトメタデータの一括取得
* `searchContractInfo`: コントラクトメタデータの検索
* `searchContractInfoBatch`: コントラクトメタデータの一括検索
* `refreshContractInfo`: コントラクトメタデータの更新
* `refreshContractTokens`: コントラクトのトークンを更新
* `refreshAllContractTokens`: コントラクトの全トークンを更新

#### 検索メソッド

* `searchMetadata`: 全メタデータを検索
* `searchTokens`: 特定のトークンを検索
* `searchContracts`: 特定のコントラクトを検索

#### Niftyswapメソッド

* `getNiftyswapTokenQuantity`: Niftyswapからトークン数量情報を取得
* `getNiftyswapUnitPrices`: Niftyswapから単価を取得
* `getNiftyswapUnitPricesWithQuantities`: Niftyswapから数量付きの単価を取得

#### ミントモニターメソッド

* `addContractToMintMonitor`: ミントモニタリングにコントラクトを追加
* `removeContractFromMintMonitor`: ミントモニタリングからコントラクトを削除
* `mintMonitorJobStatus`: ミントモニタリングジョブのステータスを確認
* `mintMonitorTriggerJob`: ミントモニタリングジョブを開始

#### コントラクト同期メソッド

* `syncContractTokens`: コントラクトのトークンを同期
* `abortContractSync`: 進行中のコントラクト同期を中止
* `contractSyncJobStatus`: コントラクト同期のステータスを確認

#### ディレクトリメソッド

* `directoryGetNetworks`: 利用可能なネットワークを取得
* `directoryGetCollections`: コレクションディレクトリを取得
* `directorySearchCollections`: コレクションディレクトリを検索

## パラメータ

このフックはパラメータを受け付けませんが、以下のフックからの設定を使用します：`useConfig`フック：

```tsx
interface Config {
  env: {
    metadataUrl: string
    // ... other environment settings
  }
  projectAccessKey: string
  jwt?: string
}
```

設定で決定される項目：

* メタデータサービスのURL
* 認証用のプロジェクトアクセスキー
* 認証リクエスト用のオプションのJWT

クライアントは`projectAccessKey`と`jwt`に基づいてメモ化され、不要な再インスタンス化を防ぎます。
