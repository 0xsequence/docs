---
title: useStorage
description: Sequence Connect クライアントのストレージインスタンスにアクセスするためのフック
sidebarTitle: useStorage
---

## インポート

```tsx
import { useStorage, useStorageItem } from '@0xsequence/connect'
```

### 使用方法

```tsx
import { useStorage, signEthAuthProof, validateEthProof } from '@0xsequence/connect'
import { useWalletClient, usePublicClient } from 'wagmi'

function App() {
  const { data: walletClient } = useWalletClient()
  const publicClient = usePublicClient()
  const storage = useStorage()
  
  const generateEthAuthProof = async () => {
    if (!walletClient || !publicClient || !storage) {
      return
    }
    
    try {
      // Use storage to generate an auth proof
      const proof = await signEthAuthProof(walletClient, storage)
      console.log('proof:', proof)
      
      const isValid = await validateEthProof(walletClient, publicClient, proof)
      console.log('isValid?:', isValid)
    } catch (e) {
      console.error(e)
    }
  }
  
  return (
    <button onClick={generateEthAuthProof}>
      Generate EthAuth Proof
    </button>
  )
}
```

### 戻り値の型

`Storage<StorageItem> | null`

利用可能な場合は Storage インスタンスを、設定されていない場合は null を返します。

## useStorageItem

Sequence Connect ストレージから特定のアイテムを取得するためのフック。

### 使用方法

```tsx
import { useStorageItem } from '@0xsequence/connect'

function App() {
  const { data: authToken, isLoading } = useStorageItem('authToken')
  
  if (isLoading) {
    return <div>Loading...</div>
  }
  
  return (
    <div>
      {authToken ? 'Authenticated' : 'Not authenticated'}
    </div>
  )
}
```

### パラメータ

| パラメータ | 型                   | 説明               |
| ----- | ------------------- | ---------------- |
| `key` | `keyof StorageItem` | 取得するストレージアイテムのキー |

### 戻り値の型

`UseQueryResult<StorageItem[K]>`

以下のプロパティを含むストレージアイテムデータを含む react-query の結果を返します：

| プロパティ       | 型                | 説明                     |
| ----------- | ---------------- | ---------------------- |
| `data`      | `StorageItem[K]` | 取得したストレージアイテムデータ       |
| `isLoading` | `boolean`        | データが現在読み込み中かどうか        |
| `isError`   | `boolean`        | データ取得中にエラーが発生したかどうか    |
| `error`     | `Error`          | エラーが発生した場合のエラーオブジェクト   |
| ...         | ...              | その他の react-query プロパティ |

## 注意事項

これらのフックは、認証データ、ウォレットの状態、その他のクライアントサイドストレージのニーズを永続化するために Sequence Connect で使用されるストレージレイヤーへのアクセスを提供します。`useStorage`フックは、認証プルーフの生成などのストレージレイヤーへの直接アクセスを必要とする操作によく使用され、`useStorageItem`は react-query の統合により特定のアイテムに簡単にアクセスする方法を提供します。
