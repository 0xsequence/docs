---
title: Recuperación Segura de Sesión
description: El SDK ofrece la opción de almacenar información de la billetera de sesión
  de forma segura en plataformas seleccionadas usando almacenamiento seguro nativo.
---

# Recuperando Sesiones

Por defecto, el SDK requerirá que los usuarios inicien sesión cada vez que la aplicación se cierre por completo. Esto se debe a que, por defecto, no escribimos la información de la cartera de sesión (por ejemplo, las claves privadas) en ningún tipo de almacenamiento persistente para la seguridad del usuario.

Sin embargo, en algunas plataformas seleccionadas, hemos integrado la oferta de almacenamiento seguro nativo de la plataforma.

Si habilitas`StoreSessionPrivateKeyInSecureStorage` en tu`SequenceConfig` ScriptableObject, automáticamente almacenaremos la información de la cartera de sesión por ti (en plataformas compatibles) y expondremos la capacidad de intentar recuperar la sesión en`SequenceLogin`. El`LoginPanel` por defecto manejará automáticamente el flujo de UI para esto también (ver[Autenticación](/sdk/unity/onboard/authentication/intro)). Si la plataforma no es compatible, esta bandera no tendrá efecto.

Vea a continuación las plataformas compatibles y aprenda sobre la solución de almacenamiento seguro de la plataforma - es importante entender los conceptos básicos de cómo funcionan estos sistemas y pensar cuidadosamente sobre las implicaciones de seguridad de almacenar claves privadas (o cualquier secreto) en almacenamiento persistente.

## iOS

En iOS, utilizamos el[iOS Keychain](https://developer.apple.com/documentation/security/keychain_services?language=objc).

## MacOS

En MacOS, utilizamos el[MacOS Keychain](https://developer.apple.com/documentation/security/keychain_services?language=objc).

## Windows

En Windows PCs, utilizamos el[Crypto: Next Generation - Data Protection API (CNG DPAPI)](https://learn.microsoft.com/en-us/windows/win32/seccng/cng-dpapi)

## Web

En compilaciones Web, utilizamos[IndexedDB](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API) vía[PlayerPrefs](https://docs.unity3d.com/ScriptReference/PlayerPrefs.html).

## Android

En compilaciones Android, utilizamos el[Android Keystore](https://developer.android.com/privacy-and-security/keystore).

Nuestro plugin Keystore para Unity (incluido en el SDK) requiere una Plantilla Principal de Gradle Personalizada. Por favor, navegue a la Configuración de su Proyecto, luego bajo`Player > Publishing Settings` habilite`Custom Main Gradle Template`. Esto creará un archivo`Assets/Plugins/Android/mainTemplate.gradle` (o similar, el editor te mostrará la ruta) si aún no tienes uno. Aquí hay un ejemplo de archivo`mainTemplate.gradle`; por favor copia/pega esto (o incorpóralo en tu archivo existente).

```
apply plugin: 'com.android.library'
**APPLY_PLUGINS**

dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar'])
    implementation 'androidx.security:security-crypto:1.1.0-alpha03'

**DEPS**}

android {
    compileSdkVersion **APIVERSION**
    buildToolsVersion '**BUILDTOOLS**'

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }

    defaultConfig {
        minSdkVersion **MINSDKVERSION**
        targetSdkVersion **TARGETSDKVERSION**
        ndk {
            abiFilters **ABIFILTERS**
        }
        versionCode **VERSIONCODE**
        versionName '**VERSIONNAME**'
        consumerProguardFiles 'proguard-unity.txt'**USER_PROGUARD**
    }

    lintOptions {
        abortOnError false
    }

    aaptOptions {
        noCompress = **BUILTIN_NOCOMPRESS** + unityStreamingAssets.tokenize(', ')
        ignoreAssetsPattern = "!.svn:!.git:!.ds_store:!*.scc:.*:!CVS:!thumbs.db:!picasa.ini:!*~"
    }**PACKAGING_OPTIONS**
}**REPOSITORIES**
**IL_CPP_BUILD_SETUP**
**SOURCE_BUILD_SETUP**
**EXTERNAL_SOURCES**
```

Nuestro plugin Keystore también requiere una Plantilla de Propiedades de Gradle Personalizada. Nuevamente, navegue a la Configuración de su Proyecto, luego bajo`Player > Publishing Settings` habilite`Custom Gradle Properties Template`. Esto creará un archivo`Assets/Plugins/Android/gradleTemplate.properties` (o similar, el editor te mostrará la ruta) si aún no tienes uno. Aquí hay un ejemplo de archivo`gradleTemplate.properties`; por favor copia/pega esto (o incorpóralo en tu archivo existente).

```
org.gradle.jvmargs=-Xmx**JVM_HEAP_SIZE**M
org.gradle.parallel=true
android.enableJetifier=true
android.useAndroidX=true
unityStreamingAssets=**STREAMING_ASSETS**
**ADDITIONAL_PROPERTIES**

android.enableR8=**MINIFY_WITH_R_EIGHT**
```

## Editor

En el editor, usamos PlayerPrefs para el almacenamiento de claves privadas. También necesitarás habilitar 'EditorStoreSessionPrivateKeyInSecureStorage' en SequenceConfig para usar el almacenamiento seguro y recuperar sesiones desde el editor. Esta bandera separada facilita probar ambos flujos sin modificar el comportamiento de tus compilaciones. El almacenamiento seguro en el editor es solo para propósitos de desarrollo y no debe considerarse seguro para almacenamiento a largo plazo.
