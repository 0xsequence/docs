---
title: useWaasFeeOptions
description: Hook para manejar opciones de tarifas WaaS para pagos de gas
sidebarTitle: useWaasFeeOptions
---

## Importar

```tsx
import { useWaasFeeOptions } from '@0xsequence/connect'
```

## Uso

```tsx
import { useWaasFeeOptions } from '@0xsequence/connect'
import { useEffect, useState } from 'react'

function App() {
  // Use the hook with default balance checking
  // This will return the wallet balance for each fee option
  const [
    pendingFeeOptionConfirmation,
    confirmPendingFeeOption,
    rejectPendingFeeOption
  ] = useWaasFeeOptions()
  
  // Or skip balance checking if needed
  // const [pendingFeeOptionConfirmation, confirmPendingFeeOption, rejectPendingFeeOption] =
  //   useWaasFeeOptions({ skipFeeBalanceCheck: true })
  
  const [selectedFeeOptionTokenName, setSelectedFeeOptionTokenName] = useState<string>()
  
  // Initialize with first option when fee options become available
  useEffect(() => {
    if (pendingFeeOptionConfirmation) {
      console.log('Pending fee options: ', pendingFeeOptionConfirmation.options)
      
      // You could select the first fee option by default
      if (pendingFeeOptionConfirmation.options.length > 0) {
        const firstOption = pendingFeeOptionConfirmation.options[0]
        setSelectedFeeOptionTokenName(firstOption.token.symbol)
      }
    }
  }, [pendingFeeOptionConfirmation])
  
  // Handle fee option selection and confirmation
  const handleConfirmFee = (tokenAddress: string | null) => {
    if (pendingFeeOptionConfirmation) {
      confirmPendingFeeOption(pendingFeeOptionConfirmation.id, tokenAddress)
    }
  }
  
  // Handle fee option rejection
  const handleRejectFee = () => {
    if (pendingFeeOptionConfirmation) {
      rejectPendingFeeOption(pendingFeeOptionConfirmation.id)
    }
  }
  
  // Render fee options UI
  if (pendingFeeOptionConfirmation) {
    return (
      <div>
        <h2>Select Fee Payment Token</h2>
        <div>
          {pendingFeeOptionConfirmation.options.map((option) => (
            <div key={option.token.symbol || option.token.contractAddress}>
              <input
                type="radio"
                name="feeOption"
                checked={selectedFeeOptionTokenName === option.token.symbol}
                onChange={() => setSelectedFeeOptionTokenName(option.token.symbol)}
              />
              <label>
                {option.token.symbol} - {option.token.contractAddress ? 
                  option.token.contractAddress : 'Native Token'}
                {/* Display balance info if extended with balance data */}
                {'balanceFormatted' in option && 
                  ` (Balance: ${option.balanceFormatted} ${option.token.symbol})`}
              </label>
            </div>
          ))}
        </div>
        <div>
          <button onClick={() => handleConfirmFee(
            pendingFeeOptionConfirmation.options.find(
              opt => opt.token.symbol === selectedFeeOptionTokenName
            )?.token.contractAddress || null
          )}>
            Confirm
          </button>
          <button onClick={handleRejectFee}>Cancel</button>
        </div>
      </div>
    )
  }
  
  return <div>No pending fee confirmation</div>
}
```

## Parámetros

El hook acepta un objeto de configuración opcional con las siguientes propiedades:

```tsx
interface WaasFeeOptionsConfig {
  skipFeeBalanceCheck?: boolean
}
```

| Parámetro             | Tipo      | Descripción                                                                     |
| --------------------- | --------- | ------------------------------------------------------------------------------- |
| `skipFeeBalanceCheck` | `boolean` | Si se debe omitir la verificación de saldos de tokens (predeterminado: `false`) |

## Tipo de Retorno: `UseWaasFeeOptionsReturnType`

El hook devuelve una tupla con los siguientes elementos:

```tsx
type UseWaasFeeOptionsReturnType = [
  pendingFeeOptionConfirmation: WaasFeeOptionConfirmation | undefined,
  confirmPendingFeeOption: (id: string, feeTokenAddress: string | null) => void,
  rejectPendingFeeOption: (id: string) => void
]
```

### Propiedades

#### pendingFeeOptionConfirmation

`WaasFeeOptionConfirmation | undefined`

Objeto que contiene los detalles actuales de confirmación de tarifa si hay una transacción pendiente, o `undefined` si no hay transacción pendiente de confirmación.

```tsx
type WaasFeeOptionConfirmation = {
  id: string                                // Unique identifier for the fee confirmation
  options: FeeOptionExtended[] | FeeOption[] // Available fee options with balance information
  chainId: number                           // Chain ID where the transaction will be executed
}
```

Cuando `skipFeeBalanceCheck` es `false`, las opciones serán del tipo `FeeOptionExtended`, que incluye información del saldo:

```tsx
type FeeOptionExtended = FeeOption & {
  balance: string               // Raw balance string
  balanceFormatted: string      // Formatted balance with proper decimals
  hasEnoughBalanceForFee: boolean // Indicates if wallet has enough balance
}
```

#### confirmPendingFeeOption

`(id: string, feeTokenAddress: string | null) => void`

Función para confirmar la opción de tarifa seleccionada.

| Parámetro         | Tipo             | Descripción                                                                          |
| ----------------- | ---------------- | ------------------------------------------------------------------------------------ |
| `id`              | `string`         | El ID de confirmación de tarifa                                                      |
| `feeTokenAddress` | `string \| null` | La dirección del token a usar para el pago de tarifa (usar `null` para token nativo) |

#### rejectPendingFeeOption

`(id: string) => void`

Función para rechazar la selección actual de opción de tarifa.

| Parámetro | Tipo     | Descripción                                |
| --------- | -------- | ------------------------------------------ |
| `id`      | `string` | El ID de confirmación de tarifa a rechazar |

## Notas

Este hook proporciona funcionalidad para manejar opciones de tarifa WaaS (Wallet as a Service) para transacciones no patrocinadas.

Características principales:

* Obtener opciones de tarifa disponibles para una transacción en Token Nativo y tokens ERC20
* Obtener automáticamente los saldos de la billetera del usuario para cada opción de tarifa (a menos que `skipFeeBalanceCheck` sea `true`)
* Permitir a los usuarios seleccionar su token de tarifa preferido
* Confirmar o rechazar selecciones de tarifa

El hook se integra con el proveedor WaaS de Sequence para interceptar solicitudes de confirmación de tarifa y presenta una interfaz de usuario para permitir la selección del token de tarifa.

Para una guía detallada sobre cómo usar el hook, consulta la guía [Pagar gas en ERC20](/sdk/web/guides/pay-gas-in-erc20).
