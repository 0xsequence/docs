---
title: useCreateListingModal
description: Hook para gestionar la interfaz del modal de creación de listados para la venta de coleccionables
sidebarTitle: useCreateListingModal
---

## Importar

```tsx
import { useCreateListingModal } from "@0xsequence/marketplace-sdk/react";
```

![Modal para Crear Publicación](/images/marketplace/create_listing_modal.png "Create Listing Modal")

## Uso

### Examples

<Tabs>
  <Tab title="Creación básica de listados">
    Ejemplo de cómo implementar una creación básica de listado usando el hook `useCreateListingModal`:

    <Note>
      Este ejemplo utiliza los hooks [`useCollectible`](/sdk/marketplace-sdk/hooks/marketplace-data/useCollectible) y [`useBalanceOfCollectible`](/sdk/marketplace-sdk/hooks/marketplace-data/useBalanceOfCollectible) de marketplace-sdk para verificar la propiedad y obtener detalles del coleccionable.
    </Note>

    ```tsx

    import {
    useCreateListingModal,
    useCollectible,
    useBalanceOfCollectible,
    } from "@0xsequence/marketplace-sdk/react";
    import { useAccount } from "wagmi";
    import type { Address } from "viem";
    import type { OrderbookKind } from "@0xsequence/marketplace-sdk";

    export default function BasicListingExample() {
    const { address: accountAddress } = useAccount();

    // Example values - replace with your own
    const chainId = 1; // Ethereum mainnet
    const collectionAddress = "0x1234567890123456789012345678901234567890" as Address;
    const collectibleId = "1";
    const orderbookKind = "sequence_marketplace_v2" as OrderbookKind;

    // Get collectible metadata
    const {
    data: collectible,
    isLoading: isLoadingCollectible,
    isError: isErrorCollectible,
    } = useCollectible({
    chainId,
    collectionAddress,
    collectibleId,
    });

    // Check if user owns the collectible
    const {
    data: balance,
    isLoading: isLoadingBalance,
    isError: isErrorBalance,
    } = useBalanceOfCollectible({
    collectionAddress,
    collectableId: collectibleId,
    userAddress: accountAddress as Address,
    chainId,
    query: {
    enabled: !!accountAddress,
    },
    });

    const { show: showCreateListingModal } = useCreateListingModal({
    onSuccess: ({ hash, orderId }) => {
    console.log("Listing created successfully", { hash, orderId });
    },
    onError: (error) => {
    console.error("Listing creation failed:", error.message);
    },
    });

    const handleCreateListing = () => {
    if (!collectible || !balance || Number(balance) === 0) return;

    showCreateListingModal({
      chainId,
      collectionAddress,
      collectibleId,
      orderbookKind,
    });

    };

    const isOwner = balance && Number(balance) > 0;
    const isLoading = isLoadingCollectible || isLoadingBalance;
    const hasError = isErrorCollectible || isErrorBalance;

    return (
    <div style={{ padding: "20px" }}>
    <h3>Create Listing</h3>

      {collectible && (
        <div style={{ marginBottom: "16px" }}>
          <p>Name: {collectible.name}</p>
          <p>Token ID: {collectibleId}</p>
          <p>Owned: {balance || "0"}</p>
        </div>
      )}

      <button
        onClick={handleCreateListing}
        disabled={isLoading || hasError || !isOwner || !accountAddress}
        style={{
          backgroundColor: isOwner ? "#007bff" : "#6c757d",
          color: "white",
          border: "none",
          padding: "12px 24px",
          borderRadius: "8px",
          cursor: isOwner ? "pointer" : "not-allowed",
        }}
      >
        {isLoading
          ? "Loading..."
          : !accountAddress
          ? "Connect Wallet"
          : !isOwner
          ? "You don't own this collectible"
          : "Create Listing"}
      </button>
    </div>

    );
    }
    ```
  </Tab>

  <Tab title="Listado desde inventario">
    Ejemplo de cómo implementar la creación de listados desde el inventario de un usuario:

    <Note>
      Este ejemplo muestra cómo integrar el modal de listado con la gestión de inventario, permitiendo que los usuarios publiquen coleccionables que poseen.
    </Note>

    ```tsx

    import {
    useCreateListingModal,
    useInventory,
    } from "@0xsequence/marketplace-sdk/react";
    import { useAccount } from "wagmi";
    import type { Address } from "viem";
    import type { OrderbookKind } from "@0xsequence/marketplace-sdk";

    export default function InventoryListingExample() {
    const { address: accountAddress } = useAccount();

    // Example values - replace with your own
    const chainId = 137; // Polygon
    const collectionAddress = "0x1234567890123456789012345678901234567890" as Address;
    const orderbookKind = "sequence_marketplace_v2" as OrderbookKind;

    // Get user's inventory for this collection
    const {
    data: inventoryData,
    isLoading: isLoadingInventory,
    error: inventoryError,
    } = useInventory({
    accountAddress: accountAddress as Address,
    collectionAddress,
    chainId,
    query: {
    enabled: !!accountAddress,
    },
    });

    const { show: showCreateListingModal } = useCreateListingModal({
    onSuccess: ({ hash, orderId }) => {
    console.log("Listing created successfully", { hash, orderId });
    // Optionally refetch inventory to update UI
    },
    onError: (error) => {
    console.error("Failed to create listing:", error.message);
    },
    successActionButtons: [
    {
    label: "View Listing",
    action: () => {
    // Navigate to listing or marketplace
    console.log("Navigate to listing");
    },
    },
    ],
    });

    const handleListCollectible = (tokenId: string) => {
    showCreateListingModal({
    chainId,
    collectionAddress,
    collectibleId: tokenId,
    orderbookKind,
    });
    };

    if (isLoadingInventory) {
    return <div>Loading inventory...</div>;
    }

    if (inventoryError) {
    return <div>Error loading inventory: {inventoryError.message}</div>;
    }

    if (!inventoryData?.collectibles?.length) {
    return <div>No collectibles found in your inventory</div>;
    }

    return (
    <div style={{ padding: "20px" }}>
    <h3>Your Collection - Create Listings</h3>

      <div style={{ display: "grid", gridTemplateColumns: "repeat(auto-fill, minmax(250px, 1fr))", gap: "16px" }}>
        {inventoryData.collectibles.map((collectible) => (
          <div
            key={collectible.tokenId}
            style={{
              border: "1px solid #e0e0e0",
              borderRadius: "8px",
              padding: "16px",
              textAlign: "center",
            }}
          >
            {collectible.image && (
              <img
                src={collectible.image}
                alt={collectible.name}
                style={{ width: "100%", height: "200px", objectFit: "cover", borderRadius: "4px" }}
              />
            )}
            <h4>{collectible.name}</h4>
            <p>Token ID: {collectible.tokenId}</p>
            <p>Balance: {collectible.balance}</p>

            <button
              onClick={() => handleListCollectible(collectible.tokenId)}
              style={{
                backgroundColor: "#28a745",
                color: "white",
                border: "none",
                padding: "8px 16px",
                borderRadius: "4px",
                cursor: "pointer",
                marginTop: "8px",
              }}
            >
              Create Listing
            </button>
          </div>
        ))}
      </div>
    </div>

    );
    }
    ```
  </Tab>
</Tabs>

## Parámetros
El hook acepta un objeto opcional `callbacks` con las siguientes propiedades:

```tsx
interface ModalCallbacks {
  onSuccess?: ({ hash, orderId }: { hash?: Hash; orderId?: string }) => void;
  onError?: (error: Error) => void;
  successActionButtons?: Array<{ label: string; action: () => void }>;
}
```

| Parámetro                        | Type                                                             | Description                                                                                  |
| -------------------------------- | ---------------------------------------------------------------- | -------------------------------------------------------------------------------------------- |
| `callbacks.onSuccess`            | `({ hash, orderId }: { hash?: Hash; orderId?: string }) => void` | Función de callback opcional que se llama cuando el listado se crea exitosamente             |
| `callbacks.onError`              | `(error: Error) => void`                                         | Función de callback opcional que se llama si ocurre un error durante la creación del listado |
| `callbacks.successActionButtons` | `Array<{ label: string; action: () => void }>`                   | Arreglo opcional de botones de acción para mostrar en caso de éxito                          |

## Tipo de retorno
El hook retorna un objeto con los siguientes métodos:

```tsx
{
  show: (args: ShowCreateListingModalArgs) => void
  close: () => void
}
```

### Métodos

#### show
`(args: ShowCreateListingModalArgs) => void`

Abre el modal de creación de listado con los parámetros especificados.

```tsx
interface ShowCreateListingModalArgs {
  collectionAddress: Address;
  chainId: number;
  collectibleId: string;
  orderbookKind?: OrderbookKind;
}
```

| Parámetro           | Type            | Obligatorio | Description                                                                 |
| ------------------- | --------------- | ----------- | --------------------------------------------------------------------------- |
| `collectionAddress` | `Address`       | Sí          | La dirección del contrato de la colección NFT                               |
| `chainId`           | `number`        | Sí          | El ID de la red blockchain (por ejemplo, 1 para Ethereum, 137 para Polygon) |
| `collectibleId`     | `string`        | Sí          | El ID del token del coleccionable a listar                                  |
| `orderbookKind`     | `OrderbookKind` | No          | El tipo de orderbook a utilizar (por defecto sequence\_marketplace\_v2)     |

#### close
`() => void`

Cierra el modal de creación de listado.

## Notas
El hook `useCreateListingModal` ofrece una forma práctica de gestionar la interfaz del modal de creación de listados para la venta de coleccionables. Se encarga de:
- Abrir y cerrar el modal
- Gestionar el estado del flujo de creación de listados
- Validación de precio y cantidad ingresados
- Selección de fecha de expiración
- Manejo de errores y callbacks de éxito
- Aprobación y ejecución de la transacción
- Soporte para diferentes tipos de orderbook

### Requisitos previos
Antes de usar este hook, asegúrese de:
1. **Autenticación del usuario**: El usuario debe estar conectado con una wallet
2. **Verificación de propiedad**: Utilice hooks como [`useBalanceOfCollectible`](/sdk/marketplace-sdk/hooks/marketplace-data/useBalanceOfCollectible) para verificar que el usuario posee el coleccionable
3. **Datos del coleccionable**: Utilice [`useCollectible`](/sdk/marketplace-sdk/hooks/marketplace-data/useCollectible) para obtener los metadatos del coleccionable que se va a listar
4. **Configuración de red**: Asegúrese de que el marketplace esté configurado para la cadena de destino

### Hooks relacionados

- [`useCollectible`](/sdk/marketplace-sdk/hooks/marketplace-data/useCollectible) - Obtener metadatos del coleccionable
- [`useBalanceOfCollectible`](/sdk/marketplace-sdk/hooks/marketplace-data/useBalanceOfCollectible) - Verificar propiedad
- [`useInventory`](/sdk/marketplace-sdk/hooks/marketplace-data/useInventory) - Obtener los coleccionables del usuario
- [`useListListingsForCollectible`](/sdk/marketplace-sdk/hooks/marketplace-data/useListListingsForCollectible) - Obtener listados existentes