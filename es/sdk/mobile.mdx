---
title: SDK Móvil para Embedded Wallet (React Native)
sidebarTitle: React Native
description: Este contenido proporciona instrucciones detalladas sobre la integración del
  SDK de Sequence Embedded Wallet con React Native para una integración completa de wallet e indexer.
---

El SDK de Sequence Embedded Wallet se puede usar con React Native para una integración completa de Sequence [Embedded Wallet](/solutions/wallets/embedded-wallet/overview) y [Indexer](/api-references/indexer/overview).

Puedes ver un ejemplo completo de cómo usar el SDK o descargar la plantilla en el repositorio [Embedded Wallet React Native Demo](https://github.com/0xsequence/demo-waas-react-native).

## Vista Previa en Video

<video controls className="w-full aspect-video" src="https://pub-f048362b915448c9b012a2e03c189024.r2.dev/SequenceMobileSDK.mp4" />

## Configuración con tus propias credenciales/claves

Sigue esta guía para obtener tu clave de acceso al proyecto y otras credenciales/claves: [https://docs.sequence.xyz/solutions/builder/embedded-wallet/](https://docs.sequence.xyz/solutions/builder/embedded-wallet/)

### Instrucciones específicas para credenciales/claves en las carpetas ./ios y ./android

#### iOS

Usando Expo, puedes establecer GIDClientID en ios > infoPlist en el archivo app.json.

Manualmente, puedes establecer GIDClientID en el archivo Info.plist para el inicio de sesión con Google.

#### Android

Usando Expo, puedes establecer el intent-filter en android > intentFilters en el archivo app.json.

Manualmente, puedes establecer el intent-filter en el archivo AndroidManifest.xml para el inicio de sesión con Google.

## Detalles de integración

<Steps>
  <Step title="Setup shims for ethers and other crypto related packages">
    Primero, revisemos el contenido de [cryptoSetup.ts](https://github.com/0xsequence/demo-waas-react-native/blob/main/cryptoSetup.ts) para la configuración de los shims y el registro de `pbkdf2` para `ethers` desde `react-native-quick-crypto` a continuación:

    ```ts
    import { install } from "react-native-quick-crypto";
    install();

    import "react-native-url-polyfill/auto";
    import { ReadableStream } from "web-streams-polyfill";
    globalThis.ReadableStream = ReadableStream;

    import crypto from "react-native-quick-crypto";
    global.getRandomValues = crypto.getRandomValues;

    export * from "@ethersproject/shims";

    import * as ethers from "ethers";

    ethers.pbkdf2.register(
      (
        password: Uint8Array,
        salt: Uint8Array,
        iterations: number,
        keylen: number,
        algo: "sha256" | "sha512"
      ) => {
        console.info("Using react-native-quick-crypto for pbkdf2");
        return ethers.hexlify(
          new Uint8Array(
            crypto.pbkdf2Sync(
              password,
              salt,
              iterations,
              keylen,
              algo === "sha256" ? "SHA-256" : "SHA-512"
            )
          )
        );
      }
    );

    export * from "ethers";
    ```

    Luego asegúrate de importar `cryptoSetup.ts` lo más temprano posible en el ciclo de vida de la aplicación. En esta demo estos se importan y configuran en la parte superior en [App.tsx](https://github.com/0xsequence/demo-waas-react-native/blob/main/App.tsx).

    En segundo lugar, necesitamos establecer alias para algunos shims, en `babel.config.js` con ayuda de la `babel-plugin-module-resolver` dependencia de desarrollo. Ver [babel.config.js](https://github.com/0xsequence/demo-waas-react-native/blob/main//babel.config.js) para el fragmento de código para actualizar los alias.
  </Step>

  <Step title="Initialize Sequence WaaS">
    ```ts
    export const sequenceWaas = new SequenceWaaS(
      {
        network: initialNetwork,
        projectAccessKey: projectAccessKey,
        waasConfigKey: waasConfigKey,
      },
      localStorage,
      null,
      new KeychainSecureStoreBackend()
    );
    ```

    (Revisa el [waasSetup.ts](https://github.com/0xsequence/demo-waas-react-native/blob/main/waasSetup.ts) archivo para más detalles)
  </Step>

  <Step title="Signing in">
    Una vez que tengas una instancia inicializada de Sequence WaaS, puedes usarla para iniciar sesión con correo electrónico, Google o Apple. Mira el fragmento de código de Google a continuación como ejemplo, y revisa el archivo [App.tsx](https://github.com/0xsequence/demo-waas-react-native/blob/main/App.tsx) para más detalles.

    ```ts
    const redirectUri = `${iosRedirectUri}:/oauthredirect`;

    const scopes = ["openid", "profile", "email"];
    const request = new AuthRequest({
      clientId,
      scopes,
      redirectUri,
      usePKCE: true,
      extraParams: {
        audience: webClientId,
        include_granted_scopes: "true",
      },
    });

    const result = await request.promptAsync({
      authorizationEndpoint: `https://accounts.google.com/o/oauth2/v2/auth`,
    });

    if (result.type === "cancel") {
      return undefined;
    }

    const serverAuthCode = result?.params?.code;

    const configForTokenExchange: AccessTokenRequestConfig = {
      code: serverAuthCode,
      redirectUri,
      clientId: iosClientId,
      extraParams: {
        code_verifier: request?.codeVerifier || "",
        audience: webClientId,
      },
    };

    const tokenResponse = await exchangeCodeAsync(configForTokenExchange, {
      tokenEndpoint: "https://oauth2.googleapis.com/token",
    });

    const userInfo = await fetchUserInfo(tokenResponse.accessToken);

    const idToken = tokenResponse.idToken;

    if (!idToken) {
      throw new Error("No idToken");
    }

    try {
      const signInResult = await sequenceWaas.signIn(
        {
          idToken: idToken,
        },
        randomName()
      );

      console.log("signInResult", JSON.stringify(signInResult));
    } catch (e) {
      console.log("error", JSON.stringify(e));
    }
    ```
  </Step>

  <Step title="Wallet operations">
    Una vez iniciada la sesión, puedes usar la instancia `sequenceWaas` para realizar operaciones de billetera como enviar transacciones, firmar mensajes, etc. Mira el fragmento de código de Google a continuación como ejemplo, y revisa el archivo [App.tsx](https://github.com/0xsequence/demo-waas-react-native/blob/main/App.tsx) para más detalles.

    ```ts
    // Signing a message
    const signature = await sequenceWaas.signMessage({ message: "your message" });

    // Sending a txn
    const txn = await sequenceWaas.sendTransaction({
      transactions: [
        {
          to: walletAddress,
          value: 0,
        },
      ],
    });
    ```
  </Step>

  <Step title="Migration notes for Ethers v6 update">
    * `react-native-quick-crypto-ethers-patch.js` y la configuración relacionada ya no son necesarias ya que ethers v6 nos permite registrar la función pbkdf2 directamente desde el paquete `react-native-quick-crypto`. (Ver [cryptoSetup.ts](https://github.com/0xsequence/demo-waas-react-native/blob/main//cryptoSetup.ts) para el código relacionado.)
    * Puedes seguir la [guía de migración de ethers](https://docs.ethers.org/v6/migrating/) para migrar tu código base a ethers v6.

    <br />
  </Step>
</Steps>

## Dependencias

### Paquetes Sequence requeridos

* @0xsequence/waas
* @0xsequence/react-native

### Otras dependencias/shims requeridos

#### Común

* ethers

* ethersproject/shims

* expo

* react-native-quick-crypto

* react-native-mmkv

* react-native-keychain

* babel-plugin-module-resolver (como dependencia de desarrollo)

#### Para inicio de sesión con Apple y Google

* expo-web-browser
* expo-auth-session
* @invertase/react-native-apple-authentication

#### Para inicio de sesión con correo electrónico

* react-native-url-polyfill
* web-streams-polyfill
