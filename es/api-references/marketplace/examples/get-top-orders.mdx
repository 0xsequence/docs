---
title: GetTopOrders
sidebarTitle: Obtener Órdenes Principales
---

Con el uso de la `GetTopOrders` api los desarrolladores pueden construir bots para recuperar las mejores órdenes para ejecutar, o simplemente notificadores para rastrear las mejores órdenes para tomar acción.

<CodeGroup>
  ```shell cURL
  curl --request POST \
      --url https://marketplace-api.sequence.app/arbitrum-sepolia/rpc/Marketplace/GetTopOrders \
      --header 'Content-Type: application/json' \
      --data '{
          "collectionAddress": "0x1693ffc74edbb50d6138517fe5cd64fd1c917709",
          "currencyAddresses": [
              "0xa9c88358862211870db6f18bc9b3f6e4f8b3eae7"
          ],
          "orderbookContractAddress": "0xfdb42A198a932C8D3B506Ffa5e855bC4b348a712",
          "tokenIDs": ["0","1", "2", "3", "4", "5"],
          "isListing": true,
          "priceSort": "DESC"
      }'
  ```

  ```ts TypeScript
  // Works in both a Webapp (browser) or Node.js by importing cross-fetch:
  // import fetch from "cross-fetch";

  (async () => {
    const res = await fetch(
      "https://marketplace-api.sequence.app/arbitrum-sepolia/rpc/Marketplace/GetTopOrders",
      {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          collectionAddress: "0x1693ffc74edbb50d6138517fe5cd64fd1c917709",
          currencyAddresses: ["0xa9c88358862211870db6f18bc9b3f6e4f8b3eae7"],
          orderbookContractAddress: "0xfdb42A198a932C8D3B506Ffa5e855bC4b348a712",
          tokenIDs: ["0", "1", "2", "3", "4", "5"],
          isListing: true,
          priceSort: "DESC",
        }),
      }
    );
    console.log("res", await res.json());
  })();
  ```
</CodeGroup>

### Esquema

Consulta el protocolo para obtener la mejor orden basada en varios filtros.

Obtiene las mejores órdenes del protocolo, opcionalmente excluyendo aquellas creadas por un usuario específico.

* Request: POST /rpc/Marketplace/GetTopOrders
* Content-Type: application/json
* Body (en JSON):
  * `orderbookContractAddress` (string) -- la dirección del contrato del protocolo
  * `collectionAddress` (string) -- la dirección de la colección NFT
  * `currencyAddresses` (string\[]) -- un array de direcciones de contratos de moneda
  * `tokenIDs` (string\[]) -- un array de IDs de token para filtrar las órdenes
  * `isListing` (bool) -- si se deben obtener órdenes de listado (true) u órdenes de oferta (false)
  * `priceSort` (SortOrder) -- la dirección para ordenar las órdenes por precio como un enum de `"DESC"` o `"ASC"`
  * `excludeUser?` (string) -- la dirección de un usuario cuyas órdenes excluir
* Respuesta (en JSON):
  * `page`
    * `page` (i32) -- número de la página
    * `pageSize` (i32) -- número de órdenes en la página
    * `more` (bool) -- si hay más órdenes
  * `orders` (OrderbookOrder\[])
    \[
    * `orderId` (string) -- id de la orden
    * `tokenContract` (string) -- el contrato de la colección
    * `tokenId` (string) -- el tokenId de la colección en la orden
    * `isListing` (bool) -- es verdadero si es un listado para venta, o falso si es una oferta
    * `quantity` (string) -- el número de tokens que incluye la orden
    * `quantityRemaining` (string) -- el número de tokens después de la orden
    * `currencyAddress` (string) -- la moneda en la que se comercia el token
    * `pricePerToken` (string) -- el precio por token
    * `expiry` (string) -- la fecha de vencimiento cuando la orden ya no es válida
    * `orderStatus` (OrderStatus) -- el estado de la orden como un enum de `"OPEN"`, `"CLOSED"`, `"CANCELLED"`
    * `createdBy` (string) -- la dirección por la que se creó la orden
    * `createdAt` (uint64) -- el momento en que se creó la orden
    * `orderbookContractAddress` (string) -- la dirección del contrato del libro de órdenes
      ]
